#!/usr/bin/env bash
set -e

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )"/.. && pwd )"
APP_DIR="${DIR}/app"
LOG_DIR="${DIR}/log"
NPM_DIR="${DIR}/app/node_modules"

"${NPM_DIR}/react-tools/bin/jsx" --watch "${APP_DIR}/src" "${APP_DIR}/build" 1>>"${LOG_DIR}/jsx.out" 2>>"${LOG_DIR}/jsx.err" &
compass watch --sass-dir "${APP_DIR}/src/styles" --css-dir "${APP_DIR}/build/styles" --javascripts-dir "${APP_DIR}/build/scripts" --images-dir "${APP_DIR}/src/images" 1>>"${LOG_DIR}/compass.out" 2>>"${LOG_DIR}/compass.err" &
"${DIR}/build/atom_shell/Atom.app/Contents/MacOS/Atom" "${APP_DIR}" 1>>"${LOG_DIR}/app.out" 2>>"${LOG_DIR}/app.err" &
